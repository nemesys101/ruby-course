<!DOCTYPE html>
<html>
<head>
   <meta http-equiv="content-type" content="text/html;charset=utf-8"> 
   <title>Taller de Ruby/Rails</title>

<meta name="generator" content="text">
<meta name="author"    content="DevChix Uruguay y Amigos" >

<!-- S6 style sheet links -->
<link rel="stylesheet" href="es-rubything.css" media="projection" id="styleProjection">
<link rel="stylesheet" href="s6/screen.css"         media="screen"     id="styleScreen">
<link rel="stylesheet" href="s6/print.css"          media="print">

<!-- S6 JS -->
<script src="s6/jquery.js"></script>
<script src="s6/jquery.slideshow.js"></script>
<script>
  $(document).ready( function() {
    Slideshow.init();
  } );

  
</script>

<!-- Better Browser Banner for Microsoft Internet Explorer (IE) -->
<!--[if IE]>
<script src="s6/jquery.microsoft.js"></script>
<![endif]-->



</head>
<body>

<div class="layout"> 
  <div id="header"></div>
  <div id="footer">
    <h1></h1>
    <h2></h2>
  </div>
</div>

<div class="presentation">
   
<div class='slide '>
<h1>Aprendiendo Ruby and Rails</h1><p>Buenos Días!</p>

</div>
<div class='slide '>
<h1>Presentaciones</h1><ul>
	<li>Devchix : devchix@ y www.devchix.com</li>
	<li>RailsBridge en la comunidad Ruby/Rails</li>
	<li>PyStar en la comunidad Python</li>
	<li>En Montevideo gente de Cubox, WyeWorks y Moove-it</li>
</ul>

</div>
<div class='slide '>
<h1>Agenda del Día</h1><ul>
	<li>9:00 <strong>Presentaciones</strong></li>
	<li>9:30 &#8211; 13:00 <strong>Instalación del ambiente de trabajo</strong></li>
	<li>10:30 -11:30 <strong>Introduction to Ruby</strong></li>
	<li>11:30 -12:00 <strong>Ruby Koans</strong></li>
	<li>12:00 -1:00 <strong>Almuerzo</strong></li>
	<li>1:00 &#8211; <strong>Rails parte 1</strong></li>
	<li>2:45 -3:00 <strong>Descanso</strong></li>
	<li>3:00 -4:30 <strong>Rails parte 2</strong></li>
	<li>4:30 <strong>Y ahora? Contribuyendo con Rails</strong></li>
</ul>

</div>
<div class='slide '>
<h1>Qué Temas Vamos a Cubrir?</h1><ul>
	<li>Ruby</li>
	<li>Instalando el ambiente de trabajo</li>
	<li>Sintaxis y operaciones simples en Ruby
	<ul>
		<li>Objectos, clases y metodos</li>
		<li>Bloques y estructuras de control</li>
		<li>Metaprogramming, tainting, reflection y marshaling // ver como colocar esta parte, solo una idea de que esto existe</li>
	</ul></li>
	<li>Testing en Ruby</li>
	<li>Una introducción a Rails
	<ul>
		<li>Cómo usar la maquinaria de Rails para manipular datos en la aplicación** Validación de datos en Rails</li>
		<li>Mostrando datos en Rails</li>
		<li>Usando scaffolding para comenzar una aplicación simple</li>
	</ul></li>
</ul>

</div>
<div class='slide '>
<h1>Ruby</h1><ul>
	<li>Originado en Japon a mediados de los 90, su creador es Yukihiro &#8220;Matz&#8221; Matsumoto. Está inspirado en Perl, Lisp entre otros lenaguajes</li>
	<li>Ruby es un lenguaje dinamico, reflexivo, orientado a objetos</li>
	<li>Hay diferentes implementaciones del lenguaje
	<ul>
		<li>MRI (mat&#8217;z ruby interpreter) es la referencia que hay de Ruby. Está escrito en C</li>
		<li>JRuby es una implementación hecha en Java</li>
		<li>IronRuby corre sobre .NET. Es desarrollado por Microsoft bajo la Apache License.</li>
		<li>Rubinius es hecha en Ruby</li>
		<li>Otros</li>
	</ul></li>
</ul>

</div>
<div class='slide '>
<h1>Porque Ruby?</h1><ul>
	<li>Fácil de aprender</li>
	<li>La comunidad de Ruby en Montevideo está creciendo</li>
	<li>Tiene RubyGems que es el sistema usado para empaquetar y distribuir código Ruby</li>
	<li>Rails es un web framework bastante popular construido sobre Ruby</li>
	<li>En 10 años se han agregado una gran cantidad de clases y modulos nativos al lenguaje.</li>
	<li>Tiene buenas herramientas para testing como RSpec y Cucumber.</li>
</ul>

</div>
<div class='slide '>
<h1>Instalando el ambiente de trabajo</h1><ul>
	<li>Todos se sienten comodos manejando una terminal?</li>
	<li>En linux ó Mac (tener el sistema actualizado e instalado curl y git)
	<ul>
		<li>RVM: Te permite manejar multiples interpretes de Ruby en la misma máquina y fácilmente cambiar entre versiones.
		<ul>
			<li><code>bash &lt; &lt;( curl http://rvm.beginrescueend.com/releasesl/rvm-install-head )</code></li>
			<li>Seguir las instrucciones para agregar rvm al .bashrc</li>
			<li><code>source $HOME/.rvm/scripts/rvm</code></li>
			<li><code>rvm notes</code></li>
		</ul></li>
	</ul></li>
	<li>En Windows hay que instalar primero Ruby
	<ul>
		<li>Ruby: Vamos a usar la version 1.9.2 y el interprete MRI
		<ul>
			<li>Ir a http://rubyinstaller.org y descargar la versión de Ruby mediante el botón Download.</li>
			<li>Ejecutarla y comenzar la intalación</li>
		</ul></li>
	</ul></li>
</ul>

</div>
<div class='slide '>
<h1>Instalando el ambiente de trabajo</h1><ul>
	<li>En Linux ó Mac
	<ul>
		<li>Ruby: para este taller usaremos mri y la versión 1.9.2
		<ul>
			<li><code>rvm install 1.9.2</code></li>
			<li>mirar rvm help para ver que más se puede hacer</li>
		</ul></li>
	</ul></li>
	<li>En Windows
	<ul>
		<li>PIK: Te permite manejar multiples interpretes de Ruby en la misma máquina y fácilmente cambiar entre versiones.
		<ul>
			<li>Descargar la última versión http://github.com/vertiginous/pik/downloads</li>
			<li>Seguir los pasos de la instalación</li>
			<li>Deslogueate o reinicia windows para integrar pik al ambiente.</li>
			<li>En una terminal
			<ul>
				<li><code>pik add</code></li>
				<li><code>pik list</code></li>
				<li><code>pik use 192</code></li>
				<li><code>ruby -v</code></li>
			</ul></li>
		</ul></li>
	</ul></li>
</ul>

</div>
<div class='slide '>
<h1>Instalando el ambiente de trabajo</h1><ul>
	<li>Rails: Vamos a usar la version 3.XX
	<ul>
		<li>En Linux</li>
		<li>En Windows</li>
		<li>En Mac</li>
	</ul></li>
</ul>
<ul>
	<li>Editores: Trabajen en el que se sientan más comodos
	<ul>
		<li>VIM</li>
		<li>Textmate</li>
		<li>Emacs</li>
		<li>Gedit</li>
		<li>Eclipse</li>
		<li>NetBeans</li>
	</ul></li>
</ul>

</div>
<div class='slide '>
<h1>Abriendo el interprete de Ruby</h1><p>Abrir una terminal y ejecutar irb.</p>
<p>Desde hace poco también existe pry y pueden bajarlo desde XX (diferencia???</p>
<p>Jugar un poco:</p>
<pre><code>1
4 + 3 
"hat" 
[1, 2, 3, "happy"].each { |i| puts i }</code></pre>
<p><code>&gt;&gt;</code> es donde ingresas comandos y en <code>=&gt;</code> va a aparecer la respuesta.</p>
<p>irb tiene un historial de comandos. Usen las flechitas para navegarlo.</p>

</div>
<div class='slide '>
<h1>Datos Básicos de Ruby</h1><table>
	<tr>
		<td>Integers</td>
		<td> <code>1</code>, <code>2</code>, <code>3</code> </td>
	</tr>
	<tr>
		<td>Strings </td>
		<td> <code>"chicken"</code> </td>
	</tr>
	<tr>
		<td>Booleans</td>
		<td> <code>true</code>, <code>false</code> </td>
	</tr>
	<tr>
		<td>Symbols </td>
		<td> <code>:chicken</code> </td>
	</tr>
	<tr>
		<td>Arrays  </td>
		<td> <code>[1, 7, "cake"]</code> </td>
	</tr>
	<tr>
		<td>Hashes  </td>
		<td> <code>{:chicken =&gt; "chicken", :sillyexample =&gt; :chicken}</code> </td>
	</tr>
</table>
<p>En Ruby TODO es un objeto. El tipo del objeto es definido por lo que el objeto puede hacer. A esto le llamamos &#8220;duck typing&#8221;. Si un objeto camina como un pato y habla como un pato, entonces el interprete lo trata como un pato.</p>
<p>Juega con la terminal!</p>

</div>
<div class='slide '>
<h1>Datos Básicos en Ruby</h1><ul>
	<li>En Java <code>min = Math.abs(num)</code></li>
	<li>En Ruby <code>postive = num.abs</code></li>
</ul>
<ul>
	<li>En C <code>strlen(name)</code></li>
	<li>En Ruby <code>name.lenght</code></li>
</ul>
<p>Le enviamos un mensaje al propio objeto. Y lo mismo aplica a toods los objetos en Ruby.</p>
<p>En Ruby, NIL es un objeto que representa nada.</p>

</div>
<div class='slide '>
<h1>Operaciones Basicas en Ruby</h1><table>
	<tr>
		<td> <code>2 + 2</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>3 * 3</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>"chicken".reverse</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>"chicken".length</code>  </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 4</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 5</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>[1 , 2, 3].include?(2)</code> </td>
		<td> </td>
		<td> </td>
	</tr>
</table>

</div>
<div class='slide '>
<h1>Operaciones Basicas en Ruby</h1><table>
	<tr>
		<td> <code>2 + 2</code> </td>
		<td> <code>4</code> </td>
	</tr>
	<tr>
		<td> <code>3 * 3</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>"chicken".reverse</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>"chicken".length</code>  </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 4</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 5</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>[1 , 2, 3].include?(2)</code> </td>
		<td> </td>
		<td> </td>
	</tr>
</table>

</div>
<div class='slide '>
<h1>Operaciones basicas en ruby</h1><table>
	<tr>
		<td> <code>2 + 2</code> </td>
		<td> <code>4</code> </td>
	</tr>
	<tr>
		<td> <code>3 * 3</code> </td>
		<td> <code>9</code> </td>
	</tr>
	<tr>
		<td> <code>"chicken".reverse</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>"chicken".length</code>  </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 4</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 5</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>[1 , 2, 3].include?(2)</code> </td>
		<td> </td>
		<td> </td>
	</tr>
</table>

</div>
<div class='slide '>
<h1>Operaciones basicas en ruby</h1><table>
	<tr>
		<td> <code>2 + 2</code> </td>
		<td> <code>4</code> </td>
	</tr>
	<tr>
		<td> <code>3 * 3</code> </td>
		<td> <code>9</code> </td>
	</tr>
	<tr>
		<td> <code>"chicken".reverse</code> </td>
		<td> <code>"nekcihc"</code> </td>
	</tr>
	<tr>
		<td> <code>"chicken".length</code>  </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 4</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 5</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>[1 , 2, 3].include?(2)</code> </td>
		<td> </td>
		<td> </td>
	</tr>
</table>

</div>
<div class='slide '>
<h1>Operaciones basicas en ruby</h1><table>
	<tr>
		<td> <code>2 + 2</code> </td>
		<td> <code>4</code> </td>
	</tr>
	<tr>
		<td> <code>3 * 3</code> </td>
		<td> <code>9</code> </td>
	</tr>
	<tr>
		<td> <code>"chicken".reverse</code> </td>
		<td> <code>"nekcihc"</code> </td>
	</tr>
	<tr>
		<td> <code>"chicken".length</code>  </td>
		<td> <code>7</code> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 4</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 5</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>[1 , 2, 3].include?(2)</code> </td>
		<td> </td>
		<td> </td>
	</tr>
</table>

</div>
<div class='slide '>
<h1>Operaciones basicas en ruby</h1><table>
	<tr>
		<td> <code>2 + 2</code> </td>
		<td> <code>4</code> </td>
	</tr>
	<tr>
		<td> <code>3 * 3</code> </td>
		<td> <code>9</code> </td>
	</tr>
	<tr>
		<td> <code>"chicken".reverse</code> </td>
		<td> <code>"nekcihc"</code> </td>
	</tr>
	<tr>
		<td> <code>"chicken".length</code>  </td>
		<td> <code>7</code> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 4</code> </td>
		<td> <code>true</code> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 5</code> </td>
		<td> </td>
	</tr>
	<tr>
		<td> <code>[1, 2, 3].include?(2)</code> </td>
		<td> </td>
		<td> </td>
	</tr>
</table>

</div>
<div class='slide '>
<h1>Operaciones basicas en ruby</h1><table>
	<tr>
		<td> <code>2 + 2</code> </td>
		<td> <code>4</code> </td>
	</tr>
	<tr>
		<td> <code>3 * 3</code> </td>
		<td> <code>9</code> </td>
	</tr>
	<tr>
		<td> <code>"chicken".reverse</code> </td>
		<td> <code>"nekcihc"</code> </td>
	</tr>
	<tr>
		<td> <code>"chicken".length</code>  </td>
		<td> <code>7</code> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 4</code> </td>
		<td> <code>true</code> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 5</code> </td>
		<td> <code>false</code> </td>
	</tr>
	<tr>
		<td> <code>[1, 2, 3].include?(2)</code> </td>
		<td> </td>
		<td>  </td>
	</tr>
</table>

</div>
<div class='slide '>
<h1>Operaciones basicas en ruby</h1><table>
	<tr>
		<td> <code>2 + 2</code> </td>
		<td> <code>4</code> </td>
	</tr>
	<tr>
		<td> <code>3 * 3</code> </td>
		<td> <code>9</code> </td>
	</tr>
	<tr>
		<td> <code>"chicken".reverse</code> </td>
		<td> <code>"nekcihc"</code> </td>
	</tr>
	<tr>
		<td> <code>"chicken".length</code>  </td>
		<td> <code>7</code> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 4</code> </td>
		<td> <code>true</code> </td>
	</tr>
	<tr>
		<td> <code>2 + 2 == 5</code> </td>
		<td> <code>false</code> </td>
	</tr>
	<tr>
		<td> <code>[1, 2, 3].include?(2)</code> </td>
		<td> <code>true</code> </td>
	</tr>
</table>
<p>Y que es lo que hace <code>"chicken".reverse.length</code> ?
Y <code>"puppy".include?("p")</code>?</p>

</div>
<div class='slide '>
<h1>Interpolatción de Expresiones</h1><p>Algo que Ruby hace con strings entre comillas dobles es interpolacion de expresiones. Es decir, dentro de un string la secuencia #{expression} es reemplazada por el valor de la expresión.</p>
<p>Por ejemplo, prueba</p>
<p><code>"Nuestro array es #{[1,2,3]}"</code></p>
<p>Ó</p>
<pre><code>var = [1,2,3,4,5,6]
"Nuestro array es #{var}"</code></pre>

</div>
<div class='slide '>
<h1>Variables</h1><p>Qué pasa en cada paso?</p>
<pre><code>thing = "chicken"
thing
thing.reverse
thing
thing = thing.reverse</code></pre>

</div>
<div class='slide '>
<h1>Variables</h1><p>Intenten.</p>
<pre><code>awesomelist = [5,2,1,8]
awesomelist.sort!
awesomelist</code></pre>
<p>Como paso esto? Acciones que terminen con un <code>!</code> &#8220;cambian&#8221; los datos!
Esto es una convención de Ruby, pero una buena a seguir.</p>

</div>
<div class='slide '>
<h1>Convenciones para Variables</h1><ul>
	<li>locales:  comienzan con minuscula o guion bajo</li>
	<li>globales: comienzan con $</li>
	<li>de instancia: comienzan con @</li>
	<li>de clase: comienzan con @@</li>
	<li>de más de una palabra se escriben con guion bajo. Ej. user_name</li>
</ul>

</div>
<div class='slide '>
<h1>Simbolos</h1><p>Son nombres de constantes que no hay que pre-declarar y que son únicas. Empieza con <code>:</code> y es seguido por un nombre. Ruby garantiza que en cualquier parte del programa en donde aparezca el simbolo va a tener el mismo valor. Son usualmente usados como llaves de un hash.</p>
<p>Por ejemplo:</p>
<ul>
	<li><code>:norte</code></li>
	<li><code>:sur</code></li>
</ul>

</div>
<div class='slide '>
<h1>Hashes</h1><ul>
	<li>Al igual que los arrays son colecciones indexadas.</li>
	<li>Las llaves de los arrays deben ser integer pero los hashes pueden tener cualquier objeto como llave.</li>
	<li>Pueden contener diferentes tipos de elemento en el mismo array/hash.</li>
	<li>Por defecto el valor para nil en un hash es false. Se puede cambiar al crear el hash.</li>
	<li>En Ruby 1.9 se introduce un nuevo sintaxis para hashes</li>
</ul>
<pre><code>frutas_color = {
		naranja:  "naranja",
		frutilla: "rojo",
		banana:   "amarillo
	}</code></pre>
<p><code>frutas_color[:frutilla]</code></p>
<p>produce</p>
<p>&#8220;rojo&#8221;</p>

</div>
<div class='slide '>
<h1>Hashes</h1><p>Consideremos un sistema de rating de libros:</p>
<ul>
	<li>Usamos valores numericos 0-5 para valorar un libro que hemos leido.</li>
	<li>:not_rated va a representar un libro que aún no ha sido rated</li>
	<li>Vamos a guardar los datos en un hash.</li>
</ul>
<p>Crea un hash y agregale algunos libros, por ejemplo:</p>
<pre><code>books = { "Left Hand of Darkness"        =&gt; 5,
              "The Word for World Is Forest" =&gt; 5,
              "Nevermind the Pollacks"       =&gt; 0,
              "Only Revolutions"             =&gt; :not_rated 
	    }</code></pre>

</div>
<div class='slide '>
<h1>Hashes</h1><p>Vamos a obtener el rating de un libro en particular con</p>
<p><code>books["Left Hand of Darkness"]</code></p>
<p>También podemos <strong>setear</strong> valores con</p>
<p><code>books["Only Revolutions"] = 3</code></p>
<p>Agregamos un libro de la misma forma</p>
<p><code>books["White Teeth"] = 4</code></p>
<p>Y con <code>books</code> vemos todo el hash</p>
<p>Jueguen con el hash en irb</p>

</div>
<div class='slide '>
<h1>Probemos</h1><p><code>40.reverse</code></p>
<p>Qué pasa?</p>
<p>Ruby dijo <code>NoMethodError: undefined method `reverse' for 40:Fixnum</code></p>
<p>Significa que <code>reverse</code> no es un metodo que podamos aplicar al número 40</p>

</div>
<div class='slide '>
<h1>Metodos</h1><p>Los metodos son invocados al enviarles un mensaje al objeto. El mensaje contiene el nombre del metodo asi como cualquier parametro que este necesite.</p>
<p>Si quieren ver los metodos de un objeto pueden escribir <code>40.methods.sort</code></p>

</div>
<div class='slide '>
<h1>Objetos</h1><p>Nuevamente, todo lo que manipulas en Ruby es un objeto y los resultados de esas manipulaciones tambien son objetos. Cada objeto tiene un identificador único.</p>
<p>Un objeto son los datos asi como tambien los metodos que se le puede aplicar.</p>
<p>Como sabemos de qu tipo es un objeto? Sólo hay que preguntarle!</p>
<p><code>40.class</code></p>

</div>
<div class='slide '>
<h1>Clases &amp; Metodos</h1><p>Aprendamos la sintaxis mediante un ejemplo:</p>
<pre><code>class Counter
end</code></pre>
<p>Qué podemos hacer con <code>Counter</code>?</p>
<p><code>c = Counter.new</code></p>

</div>
<div class='slide '>
<h1>Clases &amp; Metodos</h1><p>Aprendemos la sintaxis mediante un ejemplo:</p>
<pre><code>class Counter
attr_accessor :value
end</code></pre>
<p>Ahora intentemos</p>
<pre><code>c = Counter.new
c.value
c.value = 10
c.value</code></pre>
<p>Qué pasa? Que es lo que hace <code>attr_accessor :value</code> ?</p>

</div>
<div class='slide '>
<h1>Clases &amp; Metodos</h1><p>Aprendemos la sintaxis mediante un ejemplo:</p>
<pre><code>class Counter
  attr_accessor :value</code>

<code>  def initialize
    @value = 0
  end</code>

<code>end</code></pre>
<p>Nuevamente</p>
<pre><code>c = Counter.new
c.value</code></pre>
<p><code>initialize</code> le da instrucciones a <code>new</code> de como crear un objeto</p>

</div>
<div class='slide '>
<h1>Clases &amp; Metodos</h1><p>Aprendamos la sintaxis mediante un ejemplo:</p>
<pre><code>class Counter
  attr_accessor :value</code>

<code>  def initialize
    @value = 0
  end</code>

<code>  def increment
    @value = @value + 1
  end</code>

<code>end</code></pre>

</div>
<div class='slide '>
<h1>Classes</h1><p>Usemos nuestra clase Counter:</p>
<pre><code>count = Counter.new
count.increment
count.increment
count.value</code></pre>
<pre><code>count.class
count.methods.sort
count.responde_to?(:increment)</code></pre>

</div>
<div class='slide '>
<h1>Ejercicio</h1><p>Vamos a agregar un metodo <code>Counter.increment_by</code> que tome un <strong>argumento</strong> por el cual incrementar el contador.</p>
<p>No hay que empezar desde cero; podemos sólo <strong>abrir</strong> la clase</p>
<pre><code>class Counter</code>

<code>def increment_by(n)
  # fill in here
end</code>

<code>end</code></pre>
<p>Prueba el código que escribiste:</p>
<pre><code>c = Counter.new
c.increment_by(5)
c.value</code></pre>

</div>
<div class='slide '>
<h1>Classes</h1><p>También se puede agregar metodos a clases ya existentes:</p>
<pre><code>class String
  def chicken?
    self == "chicken"
  end
end</code></pre>
<pre><code>"chicken".chicken?
"puppy".chicken?</code></pre>
<p><code>self</code> es una forma de referirse al objeto del cual el metodo se esta llamando.</p>
<p>En <code>"puppy".chicken?</code>, <code>self</code> es <code>"puppy"</code>.</p>

</div>
<div class='slide '>
<h1>Clases</h1><p>Si aún no lo han hecho, escriban la clase Counter en su editor favorito y guardenlo en disco. Levantemoslo en la consola de ruby.</p>
<pre><code>class Counter
  attr_accessor :value&lt;/code&gt;
  def initialize
    @value = 0
  end
  def increment
    @value = @value + 1
  end
  def increment_by(n)
    @value = @value + n
  end</code></pre>
<p>En la consola: <code>require 'path_to_your_file'</code></p>

</div>
<div class='slide '>
<h1>Testing</h1><p>Automatizar cualquier tarea que se pueda hacer más de una vez es una sabia decisión.</p>
<ul>
	<li>no tener que pasar horas buscando un bug en el código que se escribio hace meses</li>
	<li>escribir codigo mas robusto y de mejor calidad</li>
	<li>el código se hace más mantenible</li>
	<li>más productividad a largo plazo sobre la aplicación</li>
</ul>

</div>
<div class='slide '>
<h1>Testing</h1><p>Ahora escribiremos una clase para testearlo automaticamente.</p>
<pre><code>require 'test/unit'
  require 'counter'
  class TestCounter &lt; Test::Unit::TestCase
    def test_increment
      assert_equal(1, Counter.new().increment())
    end
  end</code></pre>
<p>Escribanlo en un archivo test_counter.rb y ejecutenlo.</p>

</div>
<div class='slide '>
<h1>Ejercicio</h1><p>Escribir un test para increment_by.</p>

</div>
<div class='slide '>
<h1>Ejercicio</h1><p>Agregar un metodo a String que devuelva si un string es palindromo o no.</p>
<p>Un palindromo es cualquier cadena de caracteres que se lea igual de adelante para atras que de atras para adelante.</p>
<p>Para empezar tipear lo siguiente en la linea de comandos:</p>
<pre><code>class String
  def palindrome?</code></pre>
<p>y terminarlo! Pruebenlo con <code>"abba".palindrome?</code> y <code>"puppy".palindrome?</code></p>

</div>
<div class='slide '>
<h1>Más sobre las clases build-in Ruby</h1><p><a href="http://rubydoc.info/stdlib/core">http://rubydoc.info/stdlib/core/</a></p>
<p>Otras son: Array, Enumerable, Fixnum, Float, Hash, NilClass, String, Time</p>

</div>
<div class='slide '>
<h1>Bloques</h1><p>Algunos metodos también pueden tener asociados bloques como si fueran parametros.</p>
<p><code>list.each {|p| code}</code> corre <code>code</code> en cada elemento de <code>list</code></p>
<pre><code>list = [1,2,3,4]
list.each { |n| puts (n + 1) }</code></pre>
<ul>
	<li>Un <strong>bloque</strong> es un pedazo de código</li>
	<li>Puede tener dos sintaxis
	<ul>
		<li>Cuando es sólo una linea <code>{ |arg1, arg2, ..| code }</code></li>
		<li><code>{ |v| v.palindrome? }</code></li>
		<li><code>{ |x, y| x * y }</code></li>
		<li>Cuando es más de una linea 
bc. do |arg|
    code
  end</li>
	</ul></li>
</ul>

</div>
<div class='slide '>
<h1>Bloques</h1><p>Para nuestro ejemplo de los libros.</p>
<pre><code>reviews = Hash.new(0)
books.values.each { |rate| reviews[rate] = reviews[rate] + 1 }
reviews</code></pre>
<p>Qué contiene <code>reviews</code>?</p>
<p><code>reviews[5]</code></p>

</div>
<div class='slide '>
<h1>Bloques</h1><p>Y en caso que el bloque tenga más de una linea</p>
<pre><code>reviews = Hash.new(0)
books.values.each do |rate|
  reviews[rate] = reviews[rate] + 1
  # more code can go here...
end</code></pre>

</div>
<div class='slide '>
<h1>Bloques y Callbacks</h1><p>Se pueden usar bloques para implementar callbacks, para pasar pedazos de código e implementar iteradores.</p>
<p>Por ejemplo,</p>
<pre><code>def call_block
  puts "Comienzo del metodo"
  yield
  yield
  puts "Fin del metodo"
end</code></pre>
<p><code>call_block { puts "En el bloque" }</code> produce:</p>
<pre><code>Comienzo del metodo
En el bloque
En el bloque
Fin del metodo</code></pre>
<p>yield invoca al bloque asociado con la llamada al metodo que lo contiene</p>

</div>
<div class='slide '>
<h1>Expresiones Regulares</h1><ul>
	<li>Las tiene build-in en el lenguaje</li>
	<li>La sintaxis es /pattern/</li>
	<li>Una expresión regular también es un objeto</li>
</ul>
<p>Por ejemplo, /P(ython|erl)/ saca los strings que contengan Python o Perl</p>

</div>
<div class='slide '>
<h1>Estructuras de Control</h1><p>Ruby provee las clasicas estructuras de control como los if y while loops.</p>
<p>Sintaxis if</p>
<pre><code>if true
  1
else 
  2
end</code>

<code>ó</code></pre>
<pre><code>código if true</code></pre>

</div>
<div class='slide '>
<h1>Estructuras de control</h1><p>Sintaxis while</p>
<pre><code>while true
  do some code
end</code></pre>
<p>ó</p>
<pre><code>some_code while true</code></pre>

</div>
<div class='slide '>
<h1>Deberes: Ruby Koans</h1><p>Son ejercicios para aprender/practicar Ruby. Aconsejables para cualquier nivel. Tiene también ejercicios sobre metaprogramación.
Descargarlos desde &#8220;http://rubykoans.com/&#8221;http://rubykoans.com</p>

</div>
<div class='slide '>
<h1>Descanso para el Almuerzo</h1></div>
<div class='slide '>
<h1>Introduccion a Rails</h1><ul>
	<li>Rails is a framework for building and deploying web applications</li>
	<li>It&#8217;s structured using an architecture called MVC: Model-View-Controller</li>
	<li>MVC separates different kinds of application logic into sections based on what it&#8217;s used for. In Rails, these live in separate folders.</li>
	<li>Rails values &#8220;convention over configuration&#8221;&#8212;the platform will make certain assumptions about how you&#8217;re going to build your application. This makes tasks that suit Rails&#8217; conventions very easy, but actions that don&#8217;t follow these conventions will take more work.</li>
</ul>

</div>
<div class='slide '>
<h1>An Example Rails App</h1><p>To get started:</p>
<ol>
	<li>Go to the microrant directory</li>
	<li>Type <code>bundle install</code></li>
	<li>Then type <code>rails server</code></li>
	<li>Open <a href="http://localhost:3000">http://localhost:3000</a> in your web browser</li>
</ol>

</div>
<div class='slide '>
<h1>Microrant</h1><ul>
	<li>Twitter? Never heard of it.</li>
	<li>10 characters to express your anger</li>
	<li>Basic activities: create, read, update, delete (CRUD)</li>
	<li>Go to http://localhost:3000/users/new to create a new user with your name</li>
	<li>Then go to /rants/new and create a new rant
	<ul>
		<li>Rants can also be edited and deleted&#8212;give it a try!</li>
	</ul></li>
</ul>
<ul>
	<li>What&#8217;s behind the curtain?
	<ul>
		<li>Rails provides classes that allow us to retrieve and manipulate data easily</li>
		<li>Logic for the application is written in normal Ruby, and a module called ActiveRecord does all of the database connection work for you</li>
	</ul></li>
</ul>

</div>
<div class='slide '>
<h1>Behind the Scenes: the database</h1></div>
<div class='slide '>
<h1>At The Console</h1><ul>
	<li>Close down the Rails server with Ctrl-C</li>
	<li>Run <code>rails console</code></li>
	<li>You can modify the data using <code>Rant</code> and <code>User</code> classes</li>
	<li>The <code>User</code> class has <code>id</code> and <code>name</code> attributes</li>
	<li>The <code>Rant</code> class has <code>id</code>, <code>message</code>, and <code>user_id</code> attributes</li>
</ul>

</div>
<div class='slide '>
<h1>At The Console</h1><p>How can we look up a rant after it&#8217;s been created?</p>
<pre><code>r = Rant.find(1)
r.message
r.user_id</code></pre>
<p>What about modifying a rant?</p>
<pre><code>r.message = "RANTING!"
r.save</code></pre>
<p>We need to <code>save</code> the changes when we&#8217;re done editing.</p>

</div>
<div class='slide '>
<h1>Where&#8217;s My Stuff</h1><p>Rails models have built-in finder methods that help you retrieve records from the database.</p>
<p>Try:</p>
<ul>
	<li><code>Rant.all</code></li>
	<li><code>Rant.order("created_at DESC")</code></li>
	<li><code>Rant.first</code></li>
	<li><code>Rant.where("user_id = 1")</code></li>
	<li><code>Rant.where(:user_id =&gt; 1)</code></li>
</ul>

</div>
<div class='slide '>
<h1>At the Console</h1><p>Let&#8217;s try creating a new Rant, for <code>user_id</code> 1</p>
<pre><code>user = User.find(1)
rant = user.rants.build
rant.message = "WHAT IS TH"
rant.save</code></pre>
<p>Note that we didn&#8217;t need to set the <code>id</code> field of the message!
That was automatically set by <code>new</code>.</p>
<p>We <code>save</code> the record when we&#8217;re done, in order to create it, just like when we were editing a rant before.</p>

</div>
<div class='slide '>
<h1>At The Console</h1><p>Creating a rant that way was verbose. Is there a better way?</p>
<p><code>User.find(1).rants.create(:message =&gt; "E POINT!?")</code></p>
<p>Notice that you don&#8217;t need to save when you use <code>create</code>&#8212;it combines <code>new</code> and <code>save</code> into a single action.</p>

</div>
<div class='slide '>
<h1>Looking at models</h1><p>Open up the user.rb and rant.rb model files.</p>
<pre><code>class Rant &lt; ActiveRecord::Base</code>

<code>  belongs_to :user</code>

<code>  validates :user, :presence =&gt; true
  validates :message, :presence =&gt; true, :length =&gt; { :maximum =&gt; 10 }</code>

<code>end</code>

<code>class User &lt; ActiveRecord::Base</code>

<code>  has_many :rants</code>
  
<code>  validates :name, :presence =&gt; true</code>

<code>end</code></pre>

</div>
<div class='slide '>
<h1>Exercises</h1><p>Some people are writing in lowercase! This won&#8217;t do!</p>
<p>Let&#8217;s write a method that can convert all lowercase rants to uppercase. First, go find the rant.rb file in your Rails models directory.</p>
<pre><code>class Rant &lt; ActiveRecord::Base
before_save :convert_message_to_uppercase
def convert_message_to_uppercase
  ...</code></pre>
<p>Rails provides many extensions to Ruby classes to make common tasks easier. Look in <a href="http://api.rubyonrails.org/classes/ActiveSupport/Multibyte/Chars.html">http://api.rubyonrails.org/classes/ActiveSupport/Multibyte/Chars.html</a> to find the helper you need for this exercise.</p>
<p>Once you&#8217;ve added the code, try creating a lowercase rant and see what happens.</p>

</div>
<div class='slide '>
<h1>Exercises</h1><p>Sometimes you want to work with your data in a different format. Go back to the Rails console and write a program that creates a hash that contains rant messages paired with user names.</p>
<p>How do you create a new Hash again?</p>
<ul>
	<li>Earlier we saw <code>Hash.new</code>, but <code>{}</code> is a simpler way.</li>
	<li>Try <code>new_hash = {}</code></li>
</ul>
<p>The result should look like:</p>
<pre><code>=&gt; {"RANTING!"=&gt;"caylee", "WTF"=&gt;"audrey"}</code></pre>
<p>Can you use an iterator to print this out as a series of formatted strings?</p>

</div>
<div class='slide '>
<h1>Callbacks</h1><p>The <code>before_save</code> code we wrote earlier uses a <strong>callback</strong>. Rails defines several callbacks that allow you to change the input to a model before or after actions like save, create, update, and delete.</p>
<pre><code>before_save :geocode_address
after_create :notify_admins
before_validate :check_over_some_other_details</code></pre>

</div>
<div class='slide '>
<h1>Quality Control</h1><p>Validations provide an easy wrapper for checking that a particular attribute is present, in the right format, or other requirements before the application will save the data. The microblog application already contains some of these. Look at the Rant and User models to see the ones we&#8217;ve included.</p>
<p>Can you think of other validations you&#8217;d like to add? Try changing the length of a valid Rant message.</p>

</div>
<div class='slide '>
<h1>Displaying the data</h1><p>Rails will automatically create views with content when you use the <code>scaffold</code> command. Go to /app/views and have a look around.</p>
<p>These files are making use of a templating system called ERB that converts Ruby statements in the view into static HTML to display. A typical ERB statement might look like:</p>
<p>Documentation on ERB syntax: <a href="http://ruby-doc.org/stdlib/libdoc/erb/rdoc/classes/ERB.html">http://ruby-doc.org/stdlib/libdoc/erb/rdoc/classes/ERB.html</a></p>

</div>
<div class='slide '>
<h1>Exercises</h1><p>The scaffolding system is quick to use, but not always pretty. Our list of rants lists the <code>user_id</code> for the person who said it, and not their name. Let&#8217;s change that.</p>
<p>Go to /app/views/rants/ and open the index.html file. By default, the scaffolder makes the index view show a list of all records of the related model&#8217;s type. Find the line that displays the user id and change it to show the user&#8217;s name instead.</p>

</div>
<div class='slide '>
<h1>Exercises</h1><p>On the users index page, let&#8217;s add a column to the table to show how many rants each person has written. ActiveRecord makes this easy by providing a method called <code>count</code> that you can add to a collection of records to get the database count instead of the full records. For example, <code>User.count</code> or <code>Rants.count</code>.</p>
<p>These also work through has_many associations, so given a particular user record, you could try <code>user.kittens.count</code> or <code>user.books.count</code> (if those associations existed) or &#8230;</p>

</div>
<div class='slide '>
<h1>Routes</h1><p>How does Rails know what page to go to when you visit <a href="http://localhost:3000/rants/new">http://localhost:3000/rants/new</a> ?</p>
<p>Open /config/routes.rb to see how this works.</p>

</div>
<div class='slide '>
<h1>What about the C in MVC?</h1><p>Now that we&#8217;ve seen and edited models and views, let&#8217;s take a quick look at the controller files in our project.</p>
<p>What does a controller do?</p>
<ul>
	<li>It connects the view and the model, calling methods on the models to get the data needed for the view, and allowing you to access input parameters, such as those from a form.</li>
	<li>It responds to the HTTP request from the browser, and renders the requested type of output (in our scaffolds, this is html or xml, but other things like json can easily be added&#8212;instant API!)</li>
	<li>The controller is also where you would add access control, like only allowing the user who wrote the rant to delete it.</li>
</ul>

</div>
<div class='slide '>
<h1>Making Your Own</h1><ul>
	<li>Exit <code>microrant</code> directory</li>
	<li>Run <code>rails new betterrant</code></li>
	<li>Enter the betterrant directory and run:</li>
</ul>
<pre><code>bundle install
rails generate scaffold User name:string
rails generate scaffold Rant user_id:integer message:string
rake db:migrate</code></pre>
<p>At this point you can start the server and take a look around.</p>

</div>
<div class='slide '>
<h1>Summary</h1><ul>
	<li>We&#8217;ve reviewed the basics of the Ruby language
	<ul>
		<li>For a refresher, <a href="http://tryruby.org/">Try Ruby</a> is a browser based overview of Ruby</li>
		<li>Ruby has a number of simple types of data such as strings, numbers, arrays, and hashes</li>
		<li>Most computations in Ruby are handled by methods.</li>
		<li>A class is a template for creating objects that bundles data and methods</li>
		<li>Classes can be extended as new needs arise</li>
	</ul></li>
</ul>

</div>
<div class='slide '>
<h1>Summary</h1><ul>
	<li>We&#8217;ve covered a small Rails application: microrants
	<ul>
		<li>A good next tutorial is <a href="http://railsforzombies.org/">Rails For Zombies</a></li>
		<li>More detail can be found in the <a href="http://guides.rubyonrails.org/">Ruby Guides</a></li>
		<li>ActiveRecord allows us to manipulate our persistent data like normal objects</li>
		<li>.erb files allow us to intergrate Ruby code with html</li>
		<li>Scaffolding gives a way of automating the start of a Rails project</li>
	</ul></li>
</ul>

</div>
<div class='slide '>
<h1>Next Steps</h1><ul>
	<li>Try to make betterrant match or improve upon microrant</li>
	<li>Participa en el grupo de Ruby de Uruguay</li>
	<li>Otros recursos:
	<ul>
		<li>PickAxe es un clásico entre los libros para aprender Ruby. Pueden encontrarlo en <a href="http://pragprog.com">http://pragprog.com</a></li>
		<li>Web RubyLang para ver lo último de Ruby: <a href="http://www.ruby-lang.org">http://www.ruby-lang.org</a></li>
		<li>La documentación de Ruby <a href="http://www.ruby-doc.org">http://www.ruby-doc.org</a></li>
		<li>Mailing Lists
		<ul>
			<li>ruby-sur@ ?</li>
			<li>ruby-uruguay@ ?</li>
			<li>ruby-talk@ruby-lang.org (en ingles)</li>
			<li>ruby-doc@ruby-lang.org (en ingles) sobre documentación</li>
			<li>ruby-core@ruby-lang.org (en ingles) sobre implemantación del core de ruby</li>
			<li>ruby-dev@ruby-lang.org (en ingles) para desarrolladores de ruby</li>
			<li>muchos más en mailing lists en www.ruby-lang.org y archivo en www.ruby-talk.org</li>
		</ul></li>
		<li>User Groups</li>
		<li>IRC</li>
		<li>RubyConf Uruguay 2011 el próximo fin de semana.</li>
	</ul></li>
</ul>

</div>
<div class='slide '>
<h1>Contribuir con Ruby y con Rails</h1><ul>
	<li>Reportar Bugs en Ruby
	<ul>
		<li>El tracking system está en http://redmine.ruby-lang.org</li>
		<li>Antes de reportarlo navega los bugs ya reportados para ver si tu bug ya existe. También proba nuevas versiones de ruby por si eso lo soluciona.</li>
		<li>También es una buena idea enviar una pregunta sobre el bug a la lista de correo ruby-talk.</li>
		<li>Cuando envias un bug es una buena idea incluir el resultado de ejecutar ruby -v, el sistema operativo y además la problematica del código.</li>
	</ul></li>
	<li>Ayudar con la documentación
	<ul>
		<li>Hacer traducción</li>
		<li>Mejorar la documentación</li>
		<li>Hay un sistema llamado RDoc</li>
		<li>ri es un visor en la consola para esa misma documentación
		<ul>
			<li>Tipea ri ClassName para encontrar la documentación de esa clase</li>
		</ul></li>
	</ul></li>
</ul></div>


</div><!-- presentation -->
</body>
</html>